{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Segment Schema",
  "description": "Audio segment with text and metadata",
  "type": "object",
  "required": ["id", "start_ms", "end_ms", "text", "lang"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique segment identifier"
    },
    "start_ms": {
      "type": "number",
      "minimum": 0,
      "description": "Start time in milliseconds"
    },
    "end_ms": {
      "type": "number",
      "minimum": 0,
      "description": "End time in milliseconds"
    },
    "text": {
      "type": "string",
      "minLength": 1,
      "description": "Segment transcript text"
    },
    "lang": {
      "type": "string",
      "pattern": "^[a-z]{2}(-[A-Z]{2})?$",
      "description": "Language code (ISO 639-1)"
    },
    "source_file": {
      "type": "string",
      "description": "Origin audio file"
    },
    "speaker_id": {
      "type": "string",
      "description": "Speaker/host identifier"
    },
    "embedding_vector_ref": {
      "type": "string",
      "description": "Reference to stored embedding vector"
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "ASR confidence score"
    }
  }
}
